<!DOCTYPE html>
<html lang="de">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="noindex, nofollow" />
<style type="text/css">
body { font-family:helvetica,arial,sans-serif; line-height:1.4; }
a { text-decoration:none; color:#059c8c; font-weight:600; }
pre { background-color:#d9e5ec; width:90%; }
code { font-size:larger; white-space:nowrap; }
h1 { font-size:x-large; }
h2 { font-size:large; }
h3 { font-size:medium; }
</style>
<title>Aufgabe 5 Systemprogrammierung</title>
</head>
<body>

<h1>Systemprogrammierung - AIN/2<br>
<span style="font-size:smaller">Sommersemester 2023</span></h1>
<hr>

<h2>
&Uuml;bungsaufgabe 5:
C++ Klassen, Iteratoren, &Uuml;bersetzungseinheiten
</h2>
<p>
<b>Abgabe bis 9.6.2023</b></p>

<br>

<h3>Vorbereitung</h3>
<p>
Legen Sie ein Arbeitsverzeichnis f&uuml;r Aufgabe&nbsp;5 an
und speichern Sie darin das Archiv
<a href="aufgabe5.tar.gz" download>&cudarrr;&nbsp;aufgabe5.tar.gz</a>.
Entpacken sie das Archiv mit dem folgenden Kommando:
<pre>
  tar xzf aufgabe5.tar.gz
</pre>
Ihr Arbeitsverzeichnis von Aufgabe&nbsp;5 sollte anschlie&szlig;end
die vier Dateien 
<code>Makefile</code>,
<code>notenspiegel.cpp</code>,
<code>notenspiegel-in.txt</code> und
<code>notenspiegel-out.txt</code>
enthalten.
</p>

<br>

<h3>Programmierung</h3>
<p>
Das vorgegebene Programm <code>notenspiegel.cpp</code> erstellt einen
Notenspiegel. Erg&auml;nzen Sie die fehlenden &Uuml;bersetzungseinheiten
wie folgt:</p>
<p>
Erstellen Sie eine &Uuml;bersetzungseinheit <code>benotung</code>, 
die eine gleichnamige Wertklasse mit den folgenden Komponenten 
enth&auml;lt:</p>
<ul>
<li>
eine private Membervariable <code>note</code> vom Typ <code>int</code></li>
<li>
einen &ouml;ffentlichen expliziten Konstruktor <code>benotung(int)</code> 
zum Initialisieren der Membervariablen<br>
Werfen Sie bei unzul&auml;ssiger Note eine Ausnahme vom Typ 
<code>std::invalid_argument</code> mit <code>"unzulaessige Note "</code> 
und der falschen Note als Fehlertext (zul&auml;ssig sind die Noten 
10, 13, 17, 20, 23, 27, 30, 33, 37, 40, 50)</li>
<li>
zwei &ouml;ffentliche konstante statische Membervariablen <code>beste</code> 
und <code>schlechteste</code> vom Typ <code>benotung</code> mit der besten 
bzw. schlechtesten Note</li>
<li>
eine &ouml;ffentliche Memberfunktion <code>int int_value()</code>, 
die die im Objekt gekapselte Note liefert</li>
<li>
eine &ouml;ffentliche Memberfunktion <code>bool ist_bestanden()</code>, 
die <code>true</code> liefert, wenn der Wert der gekapselten Note kleiner oder 
gleich <code>40</code> ist, sonst <code>false</code></li>
<li>
eine befreundete Funktion <code>bool operator==(benotung, benotung)</code>, 
die <code>true</code> liefert, wenn beide Objekte die gleiche Noten kapseln,
sonst <code>false</code></li>
<li>
welche Memberfunktionen erzeugt der Compiler zus&auml;tzlich implizit 
in <code>benotung</code>? Implementiert er die in diesem Fall korrekt?</li>
</ul>

<p>
Erstellen Sie eine &Uuml;bersetzungseinheit <code>fachnote</code>, 
die eine gleichnamige Entit&auml;tenklasse mit den folgenden Komponenten 
enth&auml;lt:</p>
<ul>
<li>
zwei &ouml;ffentliche konstante Membervariablen 
<code>fach</code> vom Typ <code>std::string</code> und 
<code>note</code> vom Typ <code>benotung</code> 
zum Speichern eines Fachnamens mit Note</li>
<li>
einen &ouml;ffentlichen Konstruktor 
<code>fachnote(const std::string&amp;, const benotung&amp;)</code> 
zum Initialisieren der Membervariablen<br>
Der Fachname darf nicht die L&auml;nge 0 haben. Werfen Sie eine Ausnahme 
vom Typ <code>std::invalid_argument</code>, wenn diese Konsistenzregel 
verletzt ist.</li>
<li>
&uuml;berlegen Sie, welche impliziten Memberfunktionen Sie mit <code>= delete</code> 
unterdr&uuml;cken m&uuml;ssen</li>
</ul>

<p>
Erstellen Sie eine &Uuml;bersetzungseinheit <code>fachnoten_liste</code>, 
die eine gleichnamige Entit&auml;tenklasse enth&auml;lt. Verwenden Sie das 
Vorlesungsbeispiel <code>intlist</code> aus Teil&nbsp;5 als Vorlage und
sehen Sie die folgenden &Auml;nderungen vor:</p>
<ul>
<li>
die Liste soll <code>fachnote*</code> statt <code>int</code> speichern.</li>
<li>
statt eines Standardkonstruktors soll es einen expliziten Konstruktor 
mit einem Parameter geben. Leiten Sie den Typ aus dem Aufruf in 
<code>notenspiegel.cpp</code> ab. Speichern Sie die &uuml;bergebene
Funktionsadresse in einer zus&auml;tzlichen privaten Membervariablen.</li>
<li>
der Destruktor der Listenklasse ruft pro Listenelement die in der zus&auml;tzlichen 
Membervariablen gespeicherte Funktion auf, um den Speicher des jeweils referenzierten 
<code>fachnote</code >-Objekts freizugeben.</li>
</ul>

<br>

<h3>Test und Qualit&auml;tssicherung</h3>
<p>
Verwenden Sie zum Testen die gewohnten Befehle:</p>
<pre>
  make notenspiegel
  make cppcheck
  ./notenspiegel
  valgrind ./notenspiegel
</pre>
<!--
  ddd notenspiegel&amp;
-->
<p>
F&uuml;hren Sie auch die folgenden automatisierten Tests aus:</p>
<pre>
  valgrind ./notenspiegel &lt; notenspiegel-in.txt
  ./notenspiegel &lt; notenspiegel-in.txt &gt; out.txt
  diff -Z notenspiegel-out.txt out.txt
</pre>
<ul>
<li>
<code>valgrind</code> darf keine Fehler und <code>diff</code> keine Unterschiede melden.</li>
<li>
<code>cppcheck</code> sollte m&ouml;glichst keine Probleme melden.</li>
</ul>
<p>
Bessern Sie gegebenenfalls nach.</p>

<br>

<h3>Abgabe</h3>
<p>
F&uuml;hren Sie Ihr Programm mit den automatisierten Tests vor.</p>
<!--
<p>
Verpacken Sie nur die eigenen Dateien Ihrer L&ouml;sung in ein Archiv:</p>
<pre>
    tar cvzf aufgabe5.tar.gz benotung.[ch]* fachnote.[ch]* fachnoten_liste.[ch]*
</pre>
<p>
Laden Sie das Archiv dann in Moodle hoch (siehe dort).</p>
-->
<p>
<em>
Hinweis:<br>
Der Compiler <code>g++</code> darf f&uuml;r Ihr Programm 
keine Fehler oder Warnungen mehr ausgeben.<br>
Ihr Programm muss au&szlig;erdem ordentlich formatiert sein.
Bessern Sie die Formatierung gegebenenfalls mit <code>astyle</code> nach:<br>
<code>astyle -p -H --style=ansi *.[ch]*</code></em></p>


<br>

<h3>Freiwillige Zusatzaufgaben (je 1 Bonuspunkt)</h3>
<ul>
<li>
Bachelorarbeiten werden an der HTWG von zwei Pr&uuml;fern bewertet.
Aus den Bewertungen der beiden Pr&uuml;fer wird der Mittelwert gebildet.
Erg&auml;nzen Sie passend dazu in Ihrer Wertklasse <code>benotung</code>
einen weiteren Konstruktor <code>benotung(int, int)</code>, der das Objekt
mit dem Mittelwert der beiden &uuml;bergebenen Einzelnoten initialisiert.
Werfen Sie bei unzul&auml;ssigen Einzelnoten analog zum anderen Konstruktor
eine Ausnahme vom Typ <code>std::invalid_argument</code>.
Erweitern Sie <code>notenspiegel.cpp</code> um die M&ouml;glichkeit, 
bei einem Fach wahlweise eine oder zwei Noten eingeben zu k&ouml;nnen.
</li>
<li>
Sorgen Sie daf&uuml;r, dass die verkettete Liste der Fachnoten immer nach 
Noten sortiert ist, mit der besten Note am Listenanfang. F&uuml;gen Sie 
dazu in <code>fachnoten_liste::insert(fachnote*)</code> neue Noten nicht 
am Anfang der Liste ein, sondern suchen Sie mit einer Schleife die richtige 
Einf&uuml;gestelle. Als Voraussetzung brauchen Sie f&uuml;r die Wertklasse 
<code>benotung</code> eine Ordnungsrelation in Form eines befreundeten 
<code>operator&lt;</code>.
</li>
<li>
Deklarieren Sie den Konstruktor der Klasse <code>fachnote</code> als
<code>private</code> und erg&auml;nzen Sie eine Fabrikfunktion 
<code>new_instance</code>, die einen Zeiger vom Typ 
<code>std::unique_ptr&lt;fachnote&gt;</code> liefert 
(siehe das Vorlesungsbeispiel <code>termin</code> in Teil&nbsp;6).
Verwenden Sie dann in <code>notenspiegel.cpp</code> statt der eigenen 
<code>fachnoten_liste</code> eine Liste
<code>std::forward_list&lt;std::shared_ptr&lt;fachnote&gt;&gt;</code>.
Die Entsprechung zur Memberfunktion <code>insert</code> hei&szlig;t dort 
<code>push_front</code>. Die Funktion <code>delete_fachnote</code> in 
<code>notenspiegel.cpp</code> k&ouml;nnen Sie nun weglassen, weil die 
Destruktoren von <code>std::forward_list</code> und <code>std::shared_ptr</code>
den Speicher von Liste und Listenelementen automatisch freigeben.
Pr&uuml;fen Sie das mit <code>valgrind</code> nach.
</li>
</ul>

<br>

<hr>
<address style="font-size:smaller; text-align:left; float:left;">
<a href="http://www-home.htwg-konstanz.de/~drachen/">Prof. Dr. H. Drachenfels</a>
<br>
<a href="https://www.htwg-konstanz.de">Hochschule Konstanz</a> -
<a href="https://www.htwg-konstanz.de/info/impressum">Impressum</a> -
<a href="https://www.htwg-konstanz.de/info/datenschutzerklaerung/">Datenschutzerkl&auml;rung</a>
</address>
<em style="font-size:smaller; text-align:right; float:right;">
Letzte &Auml;nderung: 2.3.2023
</em>

</body>
</html>

